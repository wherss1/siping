<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Plyr Player</title>
    <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css">
    <style>
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: #000;
        }
        .player-container {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        video {
            width: 100%;
            height: 100%;
            max-height: 100vh;
        }
        /* 确保控制栏始终可见 */
        .plyr--video .plyr__controls {
            opacity: 1 !important;
            pointer-events: auto !important;
        }
    </style>
</head>
<body>
    <div class="player-container">
        <video id="player" playsinline controls crossorigin>
            <source type="application/x-mpegURL">
        </video>
    </div>
    <script src="https://cdn.plyr.io/3.7.8/plyr.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script>
        const player = new Plyr('#player', {
            controls: [
                'play-large', // 大播放按钮
                'restart', // 重新开始
                'rewind', // 快退
                'play', // 播放/暂停
                'fast-forward', // 快进
                'progress', // 进度条
                'current-time', // 当前时间
                'duration', // 总时长
                'mute', // 静音
                'volume', // 音量
                'settings', // 设置
                'fullscreen' // 全屏
            ],
            ratio: '16:9',
            keyboard: { focused: true, global: true }
        });

        // 获取URL参数中的m3u8地址
        const urlParams = new URLSearchParams(window.location.search);
        const m3u8Url = urlParams.get('m3u8');
        
        if (m3u8Url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(m3u8Url);
                hls.attachMedia(document.querySelector('video'));
                hls.on(Hls.Events.MANIFEST_PARSED, function() {
                    player.play();
                });
            } else {
                document.querySelector('source').src = m3u8Url;
                document.querySelector('video').load();
            }
        }
    </script>
</body>
</html>
